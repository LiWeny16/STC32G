C251 COMPILER V5.60.0,  road                                                               22/03/23  18:05:15  PAGE 1   


C251 COMPILER V5.60.0, COMPILATION OF MODULE road
OBJECT MODULE PLACED IN .\Out\road.obj
COMPILER INVOKED BY: C:\Learning\Keil_v5\body\C251\BIN\C251.EXE User\User_c\road.c XSMALL INTR2 BROWSE INCDIR(.\Lib\libr
                    -aries;.\Lib\seekfree_libraries;.\Lib\seekfree_peripheral;.\User\User_h) DEBUG PRINT(.\Listings\road.lst) TABS(2) OBJECT(
                    -.\Out\road.obj) 

stmt  level    source

    1          // 该文件用于对道路情况进行判断，并将相应标志位赋值
    2          
    3          #include "road.h"
    4          Road road_judge(FLAG *road_flag,DG_State *dg_state ,Err_Steering *err_steering)
    5          {
    6   1        int32 L_Sum;
    7   1        L_Sum = dg_state->L_zh_real + dg_state->L_yh_real + dg_state->L_zx_real + dg_state->L_yx_real;
    8   1        tempVar = (float)L_Sum;
    9   1        if (400 < L_Sum && L_Sum < 6000) // 直走
   10   1        {
   11   2          return Straight;
   12   2        }
   13   1        else if ( // 左转
   14   1          6000 <= L_Sum &&
   15   1          L_Sum < 7800 &&
   16   1          err_steering->Err < 0)
   17   1        {
   18   2          return Curve_Left;
   19   2        }
   20   1        else if ( // 右转
   21   1          6000 <= L_Sum &&
   22   1          L_Sum < 7800 &&
   23   1          err_steering->Err >= 0)
   24   1        {
   25   2          return Curve_Right;
   26   2        }
   27   1        else if ( // 在圆环内
   28   1          7800 <= L_Sum &&
   29   1          err_steering->Err < 0)
   30   1        {
   31   2          return Big_Ring;
   32   2        }
   33   1        else if ( //进环点
   34   1          L_Sum >= 11000 &&
   35   1          isNear(&dg_state,3779,3775,3740,233,12000)==1
   36   1          )
*** WARNING C98 IN LINE 34 OF User\User_c\road.c: parameter 1: pointer to different objects
*** WARNING C91 IN LINE 34 OF User\User_c\road.c: '&': pointer to different objects
   37   1        {
   38   2          if(road_flag->Ring_Out_Flag ==0){//不同时为1，代表没走过大圆环
   39   3            road_flag->Ring_In_Flag=1;
   40   3              return Ring_In;
   41   3          }else{
   42   3            // 代表走过了，略过即可
   43   3            return Straight;
   44   3          }
   45   2        }
   46   1        else if ( //出环点
   47   1          L_Sum >= 12000 &&
   48   1          isNear(&dg_state,3784,2871,3782,2508,12000)==1
   49   1          )
*** WARNING C98 IN LINE 47 OF User\User_c\road.c: parameter 1: pointer to different objects
*** WARNING C91 IN LINE 47 OF User\User_c\road.c: '&': pointer to different objects
   50   1        {
   51   2          if(road_flag->Ring_In_Flag ==1){
   52   3            road_flag->Ring_Out_Flag =1;//碰到且已经入圆环，就打标记
   53   3            return Ring_Out;
C251 COMPILER V5.60.0,  road                                                               22/03/23  18:05:15  PAGE 2   

   54   3          }else{
   55   3            return Straight;
   56   3          }
   57   2        }
   58   1        else if ( // 十字路口
   59   1          L_Sum >= 10500 &&
   60   1          isNear(&dg_state, 2660, 2199, 3766, 3158,15000) == 1)
*** WARNING C98 IN LINE 59 OF User\User_c\road.c: parameter 1: pointer to different objects
*** WARNING C91 IN LINE 59 OF User\User_c\road.c: '&': pointer to different objects
   61   1        {
   62   2          road_flag->Ring_In_Flag = 0;
   63   2          road_flag->Ring_Out_Flag = 0;
   64   2          return Straight;
   65   2        }
   66   1        else if ((dg_state->L_zh_real <= 6) && //完全丢线
   67   1             (dg_state->L_yh_real <= 6) &&
   68   1             (dg_state->L_zx_real <= 6) &&
   69   1             (dg_state->L_yx_real <= 6))
   70   1        {
   71   2          return Stop;
   72   2        }
   73   1      
   74   1        else
   75   1        {
   76   2          return Straight;
   77   2        }
   78   1      }
   79          int16 isNear(DG_State *dg_state,int16 zh,int16 yh,int16 zx,int16 yx,int16 bear)
   80          {
   81   1        if((float)(((int16)dg_state->L_zh_real - zh) * ((int16)dg_state->L_zh_real - zh) +
   82   1             ((int16)dg_state->L_yh_real - yh) * ((int16)dg_state->L_yh_real - yh) +
   83   1             ((int16)dg_state->L_zx_real - zx) * ((int16)dg_state->L_zx_real - zx) +
   84   1             ((int16)dg_state->L_yx_real - yx) * ((int16)dg_state->L_yx_real - yx)) /10 <=bear)
   85   1        {
   86   2          return 1;
   87   2        }
   88   1        else
   89   1        {
   90   2          return 0;
   91   2        }
   92   1      }


Module Information          Static   Overlayable
------------------------------------------------
  code size            =       575     ------
  ecode size           =    ------     ------
  data size            =    ------     ------
  idata size           =    ------     ------
  pdata size           =    ------     ------
  xdata size           =    ------     ------
  xdata-const size     =    ------     ------
  edata size           =    ------         18
  bit size             =    ------     ------
  ebit size            =    ------     ------
  bitaddressable size  =    ------     ------
  ebitaddressable size =    ------     ------
  far data size        =    ------     ------
  huge data size       =    ------     ------
  const size           =    ------     ------
  hconst size          =    ------     ------
End of Module Information.


C251 COMPILATION COMPLETE.  6 WARNING(S),  0 ERROR(S)
